((t,e)=>{'object'==typeof exports&&'undefined'!=typeof module?module.exports=e():'function'==typeof define&&define.amd?define(e):(t||self).Swup=e()})(this,function(){let t=new WeakMap;function e(e,n,o,i){var r;if(e||t.has(n))return r=t.get(n)??new WeakMap,t.set(n,r),n=r.get(o)??new Set,r.set(o,n),r=n.has(i),e?n.add(i):n.delete(i),r&&e}function i(t,e){void 0===e&&(e={}),t=(t=void 0===t?null:t)||o({hash:!0}),e={...window.history.state||{},url:t,random:Math.random(),source:'swup',...e},window.history.replaceState(e,'',t)}let n=(t,e)=>String(t).toLowerCase().replace(/[\s/_.]+/g,'-').replace(/[^\w-]+/g,'').replace(/--+/g,'-').replace(/^-+|-+$/g,'')||e||'',o=function(t){t=(void 0===t?{}:t).hash;return window.location.pathname+window.location.search+(t?window.location.hash:'')},r=(t,n,o,i)=>{let r=new AbortController;return((t,n,o,i)=>{var{signal:r,base:s=document}=i;if(r?.aborted)return;let{once:a,...c}=i,l=s instanceof Document?s.documentElement:s,h=Boolean('object'==typeof i?i.capture:i),u=i=>{var r=((t,e)=>{let n=t.target;if((n=n instanceof Text?n.parentElement:n)instanceof Element&&t.currentTarget instanceof Element){e=n.closest(e);if(e&&t.currentTarget.contains(e))return e}})(i,String(t));if(r){let t=Object.assign(i,{delegateTarget:r});o.call(l,t),a&&(l.removeEventListener(n,u,c),e(!1,l,o,d))}},d=JSON.stringify({selector:t,type:n,capture:h});e(!0,l,o,d)||l.addEventListener(n,u,c),r?.addEventListener('abort',()=>{e(!1,l,o,d)})})(t,n,o,i={...i,signal:r.signal}),{destroy:()=>r.abort()}};class s extends URL{constructor(t,e){void 0===e&&(e=document.baseURI),super(t.toString(),e),Object.setPrototypeOf(this,s.prototype)}get url(){return this.pathname+this.search}static fromElement(t){t=t.getAttribute('href')||t.getAttribute('xlink:href')||'';return new s(t)}static fromUrl(t){return new s(t)}}function a(t,e){void 0===e&&(e={});try{let o=this;function n(n){let{status:r,url:a}=u;return Promise.resolve(u.text()).then(function(n){if(500===r)throw o.hooks.call('fetch:error',i,{status:r,response:u,url:a}),new c('Server error: '+a,{status:r,url:a});var l;if(n)return l=s.fromUrl(a).url,n={url:l,html:n},!i.cache.write||e.method&&'GET'!==e.method||t!==l||o.cache.set(n.url,n),n;throw new c('Empty response: '+a,{status:r,url:a})})}t=s.fromUrl(t).url;let{visit:i=o.visit}=e,r={...o.options.requestHeaders,...e.headers},a=e.timeout??o.options.timeout,l=new AbortController,h=l.signal;e={...e,headers:r,signal:h};let u,d=!1,f=null;a&&0<a&&(f=setTimeout(()=>{d=!0,l.abort('timeout')},a));var m=(r=>{try{var s=Promise.resolve(o.hooks.call('fetch:request',i,{url:t,options:e},(t,e)=>{var{url:e,options:o}=e;return fetch(e,o)})).then(function(t){u=t,f&&clearTimeout(f)})}catch(t){return r(t)}return s&&s.then?s.then(void 0,r):s})(function(e){if(d)throw o.hooks.call('fetch:timeout',i,{url:t}),new c('Request timed out: '+t,{url:t,timedOut:d});if('AbortError'===e?.name||h.aborted)throw new c('Request aborted: '+t,{url:t,aborted:!0});throw e});return Promise.resolve(m&&m.then?m.then(n):n())}catch(p){return Promise.reject(p)}}class c extends Error{constructor(t,e){super(t),this.url=void 0,this.status=void 0,this.aborted=void 0,this.timedOut=void 0,this.name='FetchError',this.url=e.url,this.status=e.status,this.aborted=e.aborted||!1,this.timedOut=e.timedOut||!1}}class l{constructor(t){this.swup=void 0,this.pages=new Map,this.swup=t}get size(){return this.pages.size}get all(){let t=new Map;return this.pages.forEach((e,n)=>{t.set(n,{...e})}),t}has(t){return this.pages.has(this.resolve(t))}get(t){t=this.pages.get(this.resolve(t));return t&&{...t}}set(t,e){t=this.resolve(t),e={...e,url:t},this.pages.set(t,e),this.swup.hooks.callSync('cache:set',void 0,{page:e})}update(t,e){t=this.resolve(t);e={...this.get(t),...e,url:t};this.pages.set(t,e)}delete(t){this.pages.delete(this.resolve(t))}clear(){this.pages.clear(),this.swup.hooks.callSync('cache:clear',void 0,void 0)}prune(t){this.pages.forEach((e,n)=>{t(n,e)&&this.delete(n)})}resolve(t){t=s.fromUrl(t).url;return this.swup.resolveUrl(t)}}function h(t,e){return(e=void 0===e?document:e).querySelector(t)}function u(t,e){return void 0===e&&(e=document),Array.from(e.querySelectorAll(t))}let d=()=>new Promise(t=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})});function f(t){return t&&('object'==typeof t||'function'==typeof t)&&'function'==typeof t.then}function m(t,e){t=t?.closest(`[${e}]`);return t?.hasAttribute(e)?t?.getAttribute(e)||!0:void 0}class p{constructor(t){this.swup=void 0,this.swupClasses=['to-','is-changing','is-rendering','is-popstate','is-animating','is-leaving'],this.swup=t}get selectors(){var t=this.swup.visit.animation.scope;return'containers'===t?this.swup.visit.containers:'html'===t?['html']:Array.isArray(t)?t:[]}get selector(){return this.selectors.join(',')}get targets(){return this.selector.trim()?u(this.selector):[]}add(){this.targets.forEach(t=>t.classList.add(...[].slice.call(arguments)))}remove(){this.targets.forEach(t=>t.classList.remove(...[].slice.call(arguments)))}clear(){this.targets.forEach(t=>{var e=t.className.split(' ').filter(t=>this.isSwupClass(t));t.classList.remove(...e)})}isSwupClass(t){return this.swupClasses.some(e=>t.startsWith(e))}}class v{constructor(t,e){this.id=void 0,this.state=void 0,this.from=void 0,this.to=void 0,this.containers=void 0,this.animation=void 0,this.trigger=void 0,this.cache=void 0,this.history=void 0,this.scroll=void 0,this.meta=void 0;var{to:e,from:o,hash:i,el:r,event:s}=e;this.id=Math.random(),this.state=1,this.from={url:o??t.location.url,hash:t.location.hash},this.to={url:e,hash:i},this.containers=t.options.containers,this.animation={animate:!0,wait:!1,name:void 0,native:t.options.native,scope:t.options.animationScope,selector:t.options.animationSelector},this.trigger={el:r,event:s},this.cache={read:t.options.cache,write:t.options.cache},this.history={action:'push',popstate:!1,direction:void 0},this.scroll={reset:!0,target:void 0},this.meta={}}advance(t){this.state<t&&(this.state=t)}abort(){this.state=8}get done(){return 7<=this.state}}function g(t){return new v(this,t)}let w='undefined'!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol('Symbol.iterator')):'@@iterator';function y(t,e,n){if(!t.s){if(n instanceof k){if(!n.s)return void(n.o=y.bind(null,t,e));1&e&&(e=n.s),n=n.v}n&&n.then?n.then(y.bind(null,t,e),y.bind(null,t,2)):(t.s=e,t.v=n,(e=t.o)&&e(t))}}let k=(()=>{function t(){}return t.prototype.then=function(e,n){let o=new t,i=this.s;if(i){let t=1&i?e:n;if(t){try{y(o,1,t(this.v))}catch(t){y(o,2,t)}return o}return this}return this.o=function(t){try{var i=t.v;1&t.s?y(o,1,e?e(i):i):n?y(o,1,n(i)):y(o,2,i)}catch(t){y(o,2,t)}},o},t})();function P(t){return t instanceof k&&1&t.s}class b{constructor(t){this.swup=void 0,this.registry=new Map,this.hooks=['animation:out:start','animation:out:await','animation:out:end','animation:in:start','animation:in:await','animation:in:end','animation:skip','cache:clear','cache:set','content:replace','content:scroll','enable','disable','fetch:request','fetch:error','fetch:timeout','history:popstate','link:click','link:self','link:anchor','link:newtab','page:load','page:view','scroll:top','scroll:anchor','visit:start','visit:transition','visit:abort','visit:end'],this.swup=t,this.init()}init(){this.hooks.forEach(t=>this.create(t))}create(t){this.registry.has(t)||this.registry.set(t,new Map)}exists(t){return this.registry.has(t)}get(t){var e=this.registry.get(t);if(e)return e;console.error(`Unknown hook '${t}'`)}clear(){this.registry.forEach(t=>t.clear())}on(t,e,n){void 0===n&&(n={});var i,o=this.get(t);return o?(i=o.size+1,n={...n,id:i,hook:t,handler:e},o.set(e,n),()=>this.off(t,e)):(console.warn(`Hook '${t}' not found.`),()=>{})}before(t,e,n){return this.on(t,e,{...n=void 0===n?{}:n,before:!0})}replace(t,e,n){return this.on(t,e,{...n=void 0===n?{}:n,replace:!0})}once(t,e,n){return this.on(t,e,{...n=void 0===n?{}:n,once:!0})}off(t,e){var n=this.get(t);n&&e?n.delete(e)||console.warn(`Handler for hook '${t}' not found.`):n&&n.clear()}call(t,e,n,o){try{let i=this,[r,s,a]=i.parseCallArgs(t,e,n,o),{before:c,handler:l,after:h}=i.getHandlers(t,a);return Promise.resolve(i.run(c,r,s)).then(function(){return Promise.resolve(i.run(l,r,s,!0)).then(function(e){let[n]=e;return Promise.resolve(i.run(h,r,s)).then(function(){return i.dispatchDomEvent(t,r,s),n})})})}catch(t){return Promise.reject(t)}}callSync(t,e,n,o){var[e,n,o]=this.parseCallArgs(t,e,n,o),{before:o,handler:c,after:l}=this.getHandlers(t,o),[o]=(this.runSync(o,e,n),this.runSync(c,e,n,!0));return this.runSync(l,e,n),this.dispatchDomEvent(t,e,n),o}parseCallArgs(t,e,n,o){return e instanceof v||'object'!=typeof e&&'function'!=typeof n?[e,n,o]:[void 0,e,n]}run(t,e,n,o){void 0===o&&(o=!1);try{let i,r=this,s=(void 0===e&&(e=r.swup.visit),[]),a=((t,e,n)=>{if('function'==typeof t[w]){var o,i,r,s=t[w]();if(function t(a){try{for(;!((o=s.next()).done||n&&n());)if((a=e(o.value))&&a.then){if(!P(a))return void a.then(t,r=r||y.bind(null,i=new k,2));a=a.v}i?y(i,1,a):i=a}catch(t){y(i=i||new k,2,t)}}(),s.return){var a=function(t){try{o.done||s.return()}catch(t){}return t};if(i&&i.then)return i.then(a,function(t){throw a(t)});a()}return i}if(!('length'in t))throw new TypeError('Object is not iterable');for(var c=[],l=0;l<t.length;l++)c.push(t[l]);return((t,e,n)=>{var o,i,r=-1;return function s(a){try{for(;++r<t.length&&(!n||!n());)if((a=e(r))&&a.then){if(!P(a))return void a.then(s,i=i||y.bind(null,o=new k,2));a=a.v}o?y(o,1,a):o=a}catch(t){y(o=o||new k,2,t)}}(),o})(c,function(t){return e(c[t])},n)})(t,function(t){let{hook:i,handler:a,defaultHandler:c,once:l}=t;if(!e?.done)return l&&r.off(i,a),(o=>{try{var i=Promise.resolve(((t,e)=>(void 0===e&&(e=[]),new Promise((n,o)=>{var i=t(...e);f(i)?i.then(n,o):n(i)})))(a,[e,n,c])).then(function(t){s.push(t)})}catch(t){return o(t)}return i&&i.then?i.then(void 0,o):i})(function(t){if(o)throw t;console.error(`Error in hook '${i}':`,t)})},function(){return i});return Promise.resolve(a&&a.then?a.then(function(t){return i,s}):(i,s))}catch(t){return Promise.reject(t)}}runSync(t,e,n,o){void 0===e&&(e=this.swup.visit),void 0===o&&(o=!1);var r,s,a,c,i=[];for({hook:r,handler:s,defaultHandler:a,once:c}of t)if(!e?.done){c&&this.off(r,s);try{let t=s(e,n,a);i.push(t),f(t)&&console.warn(`Swup will not await Promises in handler for synchronous hook '${r}'.`)}catch(t){if(o)throw t;console.error(`Error in hook '${r}':`,t)}}return i}getHandlers(t,e){let n=this.get(t);if(!n)return{found:!1,before:[],handler:[],after:[],replaced:!1};let o=Array.from(n.values()),i=this.sortRegistrations,r=o.filter(t=>{var{before:t,replace:n}=t;return t&&!n}).sort(i),s=o.filter(t=>{t=t.replace;return t}).filter(t=>!0).sort(i),a=o.filter(t=>{var{before:t,replace:n}=t;return!t&&!n}).sort(i),c=0<s.length,l=[];if(e&&(l=[{id:0,hook:t,handler:e}],c)){let n=s.length-1,{handler:o,once:i}=s[n],r=t=>{let n=s[t-1];return n?(e,o)=>n.handler(e,o,r(t-1)):e};l=[{id:0,hook:t,once:i,handler:o,defaultHandler:r(n)}]}return{found:!0,before:r,handler:l,after:a,replaced:c}}sortRegistrations(t,e){return(t.priority??0)-(e.priority??0)||t.id-e.id||0}dispatchDomEvent(t,e,n){e?.done||(n={hook:t,args:n,visit:e||this.swup.visit},document.dispatchEvent(new CustomEvent('swup:any',{detail:n,bubbles:!0})),document.dispatchEvent(new CustomEvent('swup:'+t,{detail:n,bubbles:!0})))}parseName(t){var[t,...n]=t.split('.');return[t,n.reduce((t,e)=>({...t,[e]:!0}),{})]}}function E(t){var{selector:e,elements:n}=t;try{if(!1===e&&!n)return Promise.resolve();let t=[];if(n)t=Array.from(n);else if(e&&!(t=u(e,document.body)).length)return console.warn(`[swup] No elements found matching animationSelector \`${e}\``),Promise.resolve();var o=t.map(t=>(t=>{let{type:e,timeout:n,propCount:o}=(t=>{var n=x(t=window.getComputedStyle(t),C+'Delay'),o=x(t,C+'Duration'),n=$(n,o),r=x(t,U+'Delay'),t=x(t,U+'Duration'),r=$(r,t),c=Math.max(n,r);return{type:r=0<c?r<n?C:U:null,timeout:c,propCount:r?(r===C?o:t).length:0}})(t);return!(!e||!n)&&new Promise(i=>{let r=e+'end',s=performance.now(),a=0,c=()=>{t.removeEventListener(r,l),i()},l=e=>{e.target!==t||(performance.now()-s)/1e3<e.elapsedTime||++a>=o&&c()};setTimeout(()=>{a<o&&c()},n+1),t.addEventListener(r,l)})})(t));return 0<o.filter(Boolean).length?Promise.resolve(Promise.all(o)).then(function(){}):(e&&console.warn(`[swup] No CSS animation duration defined on elements matching \`${e}\``),Promise.resolve())}catch(t){return Promise.reject(t)}}let S=t=>{if(!(t=t&&'#'===t.charAt(0)?t.substring(1):t))return null;var e=decodeURIComponent(t);let n=document.getElementById(t)||document.getElementById(e)||h(`a[name='${CSS.escape(t)}']`)||h(`a[name='${CSS.escape(e)}']`);return n=n||'top'!==t?n:document.body},C='transition',U='animation';function x(t,e){return(t[e]||'').split(', ')}function $(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((e,n)=>A(e)+A(t[n])))}function A(t){return 1e3*parseFloat(t)}function H(t,e){void 0===e&&(e={});try{let a,c=this;function r(r){if(a)return r;c.navigating=!0;var r=(c.visit=t).trigger.el,h=(e.referrer=e.referrer||c.location.url,!1===e.animate&&(t.animation.animate=!1),t.animation.animate||c.classes.clear(),e.history||m(r,'data-swup-history')),h=('string'==typeof h&&['push','replace'].includes(h)&&(t.history.action=h),e.animation||m(r,'data-swup-animation'));return'string'==typeof h&&(t.animation.name=h),t.meta=e.meta||{},'object'==typeof e.cache?(t.cache.read=e.cache.read??t.cache.read,t.cache.write=e.cache.write??t.cache.write):void 0!==e.cache&&(t.cache={read:!!e.cache,write:!!e.cache}),delete e.cache,(a=>{try{var l=(a=>{try{var l=Promise.resolve(c.hooks.call('visit:start',t,void 0)).then(function(){function r(){if(!t.done)return Promise.resolve(c.hooks.call('visit:transition',t,void 0,function(){try{let n;function e(e){return n?e:(t.advance(4),Promise.resolve(c.animatePageOut(t)).then(function(){function e(){return Promise.resolve(c.animatePageIn(t)).then(function(){})}var n=(()=>{if(t.animation.native&&document.startViewTransition)return Promise.resolve(document.startViewTransition(function(){try{let e=c.renderPage;return Promise.resolve(a).then(function(n){return Promise.resolve(e.call(c,t,n))})}catch(t){return Promise.reject(t)}}).finished).then(function(){});{let e=c.renderPage;return Promise.resolve(a).then(function(n){return Promise.resolve(e.call(c,t,n)).then(function(){})})}})();return n&&n.then?n.then(e):e()}))}var o=(()=>{if(!t.animation.animate)return Promise.resolve(c.hooks.call('animation:skip',void 0)).then(function(){let e=c.renderPage;return Promise.resolve(a).then(function(o){return Promise.resolve(e.call(c,t,o)).then(function(){n=1})})})})();return Promise.resolve(o&&o.then?o.then(e):e(o))}catch(i){return Promise.reject(i)}})).then(function(){if(!t.done)return Promise.resolve(c.hooks.call('visit:end',t,void 0,()=>c.classes.clear())).then(function(){t.state=7,c.navigating=!1,c.onVisitEnd&&(c.onVisitEnd(),c.onVisitEnd=void 0)})})}t.state=3;let a=c.hooks.call('page:load',t,{options:e},function(t,e){try{function n(t){return e.page=t,e.cache=!!o,e.page}let o;return t.cache.read&&(o=c.cache.get(t.to.url)),Promise.resolve(o?n(o):Promise.resolve(c.fetchPage(t.to.url,e.options)).then(n))}catch(i){return Promise.reject(i)}});a.then(e=>{e=e.html;t.advance(5),t.to.html=e,t.to.document=(new DOMParser).parseFromString(e,'text/html')});var l=t.to.url+t.to.hash,l=(t.history.popstate||('replace'===t.history.action||t.to.url===c.location.url?i(l):(c.currentHistoryIndex++,((t,e)=>{void 0===e&&(e={}),e={url:t=t||o({hash:!0}),random:Math.random(),source:'swup',...e},window.history.pushState(e,'',t)})(l,{index:c.currentHistoryIndex}))),c.location=s.fromUrl(l),t.history.popstate&&c.classes.add('is-popstate'),t.animation.name&&c.classes.add('to-'+n(t.animation.name)),(()=>{if(t.animation.wait)return Promise.resolve(a).then(function(){})})());return l&&l.then?l.then(r):r()})}catch(t){return a(t)}return l&&l.then?l.then(void 0,a):l})(function(e){e&&!e?.aborted?(t.state=9,console.error(e),c.options.skipPopStateHandling=()=>(window.location.assign(t.to.url+t.to.hash),!0),window.history.back()):t.state=8})}catch(t){return a(!0,t)}return l&&l.then?l.then(a.bind(null,!1),a.bind(null,!0)):a(!1,l)})(function(e,n){if(delete t.to.document,e)throw n;return n})}var l=(()=>{if(c.navigating)return 6<=c.visit.state?(t.state=2,c.onVisitEnd=()=>c.performNavigation(t,e),void(a=1)):Promise.resolve(c.hooks.call('visit:abort',c.visit,void 0)).then(function(){delete c.visit.to.document,c.visit.state=8})})();return Promise.resolve(l&&l.then?l.then(r):r(l))}catch(h){return Promise.reject(h)}}function T(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),'string'!=typeof t)throw new Error('swup.navigate() requires a URL parameter');var i;this.shouldIgnoreVisit(t,{el:n.el,event:n.event})?window.location.assign(t):({url:t,hash:i}=s.fromUrl(t),n=this.createVisit({...n,to:t,hash:i}),this.performNavigation(n,e))}function j(t){try{let e=this;return Promise.resolve(e.hooks.call('animation:out:start',t,void 0,()=>{e.classes.add('is-changing','is-animating','is-leaving')})).then(function(){return Promise.resolve(e.hooks.call('animation:out:await',t,{skip:!1},(t,n)=>{n=n.skip;if(!n)return e.awaitAnimations({selector:t.animation.selector})})).then(function(){return Promise.resolve(e.hooks.call('animation:out:end',t,void 0)).then(function(){})})})}catch(t){return Promise.reject(t)}}function L(t){let e=t.to.document;var n,i;return!!e&&(n=e.querySelector('title')?.innerText||'',document.title=n,n=u('[data-swup-persist]:not([data-swup-persist=""])'),i=t.containers.map(t=>{var n=document.querySelector(t),o=e.querySelector(t);return n&&o?(n.replaceWith(o.cloneNode(!0)),!0):(n||console.warn('[swup] Container missing in current document: '+t),o||console.warn('[swup] Container missing in incoming document: '+t),!1)}).filter(Boolean),n.forEach(t=>{var e=t.getAttribute('data-swup-persist'),e=h(`[data-swup-persist="${e}"]`);e&&e!==t&&e.replaceWith(t)}),i.length===t.containers.length)}function V(t){var e={behavior:'auto'},{target:n,reset:o}=t.scroll,n=n??t.to.hash;let r=!1;return n&&(r=this.hooks.callSync('scroll:anchor',t,{hash:n,options:e},(t,e)=>{var{hash:e,options:o}=e,e=this.getAnchorElement(e);return e&&e.scrollIntoView(o),!!e})),r=o&&!r?this.hooks.callSync('scroll:top',t,{options:e},(t,e)=>{e=e.options;return window.scrollTo({top:0,left:0,...e}),!0}):r}function I(t){try{let e=this;if(t.done)return Promise.resolve();let n=e.hooks.call('animation:in:await',t,{skip:!1},(t,n)=>{n=n.skip;if(!n)return e.awaitAnimations({selector:t.animation.selector})});return Promise.resolve(d()).then(function(){return Promise.resolve(e.hooks.call('animation:in:start',t,void 0,()=>{e.classes.remove('is-animating')})).then(function(){return Promise.resolve(n).then(function(){return Promise.resolve(e.hooks.call('animation:in:end',t,void 0)).then(function(){})})})})}catch(t){return Promise.reject(t)}}function q(t,e){try{let r=this;if(t.done)return Promise.resolve();t.advance(6);var a=e.url;return r.isSameResolvedUrl(o(),a)||(i(a),r.location=s.fromUrl(a),t.to.url=r.location.url,t.to.hash=r.location.hash),Promise.resolve(r.hooks.call('content:replace',t,{page:e},(t,e)=>{if(r.classes.remove('is-leaving'),t.animation.animate&&r.classes.add('is-rendering'),!r.replaceContent(t))throw new Error('[swup] Container mismatch, aborting');t.animation.animate&&(r.classes.add('is-changing','is-animating','is-rendering'),t.animation.name)&&r.classes.add('to-'+n(t.animation.name))})).then(function(){return Promise.resolve(r.hooks.call('content:scroll',t,void 0,()=>r.scrollToContent(t))).then(function(){return Promise.resolve(r.hooks.call('page:view',t,{url:r.location.url,title:document.title})).then(function(){})})})}catch(t){return Promise.reject(t)}}function N(t){if(Boolean(t?.isSwupPlugin)){if(t.swup=this,!t._checkRequirements||t._checkRequirements())return t._beforeMount&&t._beforeMount(),t.mount(),this.plugins.push(t),this.plugins}else console.error('Not a swup plugin instance',t)}function R(t){let e=this.findPlugin(t);if(e)return e.unmount(),e._afterUnmount&&e._afterUnmount(),this.plugins=this.plugins.filter(t=>t!==e),this.plugins;console.error('No such plugin',e)}function O(t){return this.plugins.find(e=>e===t||e.name===t||e.name==='Swup'+String(t))}function D(t){var e;return'function'!=typeof this.options.resolveUrl?(console.warn('[swup] options.resolveUrl expects a callback function.'),t):(e=this.options.resolveUrl(t))&&'string'==typeof e?e.startsWith('//')||e.startsWith('http')?(console.warn('[swup] options.resolveUrl needs to return a relative url'),t):e:(console.warn('[swup] options.resolveUrl needs to return a url'),t)}function M(t,e){return this.resolveUrl(t)===this.resolveUrl(e)}let W={animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',animationScope:'html',cache:!0,containers:['#swup'],hooks:{},ignoreVisit:function(t,e){e=(void 0===e?{}:e).el;return!!e?.closest('[data-no-swup]')},linkSelector:'a[href]',linkToSelf:'scroll',native:!1,plugins:[],resolveUrl:t=>t,requestHeaders:{'X-Requested-With':'swup',Accept:'text/html, application/xhtml+xml'},skipPopStateHandling:t=>'swup'!==t.state?.source,timeout:0};return class{get currentPageUrl(){return this.location.url}constructor(t){void 0===t&&(t={}),this.version='4.8.2',this.options=void 0,this.defaults=W,this.plugins=[],this.visit=void 0,this.cache=void 0,this.hooks=void 0,this.classes=void 0,this.location=s.fromUrl(window.location.href),this.currentHistoryIndex=void 0,this.clickDelegate=void 0,this.navigating=!1,this.onVisitEnd=void 0,this.use=N,this.unuse=R,this.findPlugin=O,this.log=()=>{},this.navigate=T,this.performNavigation=H,this.createVisit=g,this.delegateEvent=r,this.fetchPage=a,this.awaitAnimations=E,this.renderPage=q,this.replaceContent=L,this.animatePageIn=I,this.animatePageOut=j,this.scrollToContent=V,this.getAnchorElement=S,this.getCurrentUrl=o,this.resolveUrl=D,this.isSameResolvedUrl=M,this.options={...this.defaults,...t},this.handleLinkClick=this.handleLinkClick.bind(this),this.handlePopState=this.handlePopState.bind(this),this.cache=new l(this),this.classes=new p(this),this.hooks=new b(this),this.visit=this.createVisit({to:''}),this.currentHistoryIndex=window.history.state?.index??1,this.enable()}enable(){try{let t=this,e=t.options.linkSelector;t.clickDelegate=t.delegateEvent(e,'click',t.handleLinkClick),window.addEventListener('popstate',t.handlePopState),t.options.animateHistoryBrowsing&&(window.history.scrollRestoration='manual'),t.options.native=t.options.native&&!!document.startViewTransition,t.options.plugins.forEach(e=>t.use(e));for(let[e,n]of Object.entries(t.options.hooks)){let[o,i]=t.hooks.parseName(e);t.hooks.on(o,n,i)}return'swup'!==window.history.state?.source&&i(null,{index:t.currentHistoryIndex}),Promise.resolve(d()).then(function(){return Promise.resolve(t.hooks.call('enable',void 0,void 0,()=>{var e=document.documentElement;e.classList.add('swup-enabled'),e.classList.toggle('swup-native',t.options.native)})).then(function(){})})}catch(t){return Promise.reject(t)}}destroy(){try{let t=this;return t.clickDelegate.destroy(),window.removeEventListener('popstate',t.handlePopState),t.cache.clear(),t.options.plugins.forEach(e=>t.unuse(e)),Promise.resolve(t.hooks.call('disable',void 0,void 0,()=>{var t=document.documentElement;t.classList.remove('swup-enabled'),t.classList.remove('swup-native')})).then(function(){t.hooks.clear()})}catch(t){return Promise.reject(t)}}shouldIgnoreVisit(t,e){var{el:e,event:o}=void 0===e?{}:e,{origin:t,url:r,hash:a}=s.fromUrl(t);return t!==window.location.origin||!(!e||!this.triggerWillOpenNewWindow(e))||!!this.options.ignoreVisit(r+a,{el:e,event:o})}handleLinkClick(t){let e=t.delegateTarget,{href:n,url:o,hash:r}=s.fromElement(e);if(!this.shouldIgnoreVisit(n,{el:e,event:t}))if(this.navigating&&o===this.visit.to.url)t.preventDefault();else{let a=this.createVisit({to:o,hash:r,el:e,event:t});t.metaKey||t.ctrlKey||t.shiftKey||t.altKey?this.hooks.callSync('link:newtab',a,{href:n}):0===t.button&&this.hooks.callSync('link:click',a,{el:e,event:t},()=>{var e=a.from.url??'';t.preventDefault(),o&&o!==e?this.isSameResolvedUrl(o,e)||this.performNavigation(a):r?this.hooks.callSync('link:anchor',a,{hash:r},()=>{i(o+r),this.scrollToContent(a)}):this.hooks.callSync('link:self',a,void 0,()=>{'navigate'===this.options.linkToSelf?this.performNavigation(a):(i(o),this.scrollToContent(a))})})}}handlePopState(t){var e=t.state?.url??window.location.href;if(!this.options.skipPopStateHandling(t)&&!this.isSameResolvedUrl(o(),this.location.url)){let{url:n,hash:i}=s.fromUrl(e),r=this.createVisit({to:n,hash:i,event:t});r.history.popstate=!0;e=t.state?.index??0;e&&e!==this.currentHistoryIndex&&(r.history.direction=0<e-this.currentHistoryIndex?'forwards':'backwards',this.currentHistoryIndex=e),r.animation.animate=!1,r.scroll.reset=!1,r.scroll.target=!1,this.options.animateHistoryBrowsing&&(r.animation.animate=!0,r.scroll.reset=!0),this.hooks.callSync('history:popstate',r,{event:t},()=>{this.performNavigation(r)})}}triggerWillOpenNewWindow(t){return!!t.matches('[download], [target="_blank"]')}}});